{"version":3,"file":"static/js/content.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","utils/fillColor.ts","contentScript/content.ts","utils/parseData.ts"],"sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import { Subject } from \"../types\";\nexport const fillColor = (data: Subject[]): Subject[] => {\n  let colorIndex = 0;\n  const colorsMap = new Map<string, number>();\n\n  for (const item of data) {\n    if (item.color === undefined) {\n      const key = item.subjectCode;\n      const existingColor = colorsMap.get(key);\n      const color = existingColor !== undefined ? existingColor : colorIndex++;\n      item.color = color;\n      colorsMap.set(key, color);\n    }\n  }\n\n  data.sort((a, b) => a.color! - b.color!);\n\n  return data;\n};\n","import { Subject } from \"../types\";\nimport { fillColor, parseSubject } from \"../utils\";\nconst getData = (): Subject[] => {\n  const trElements = Array.from(document.querySelectorAll(\".body-table tr\"));\n  const data = trElements.map((trElement) =>\n    parseSubject(Array.from(trElement.querySelectorAll(\"td\")))\n  );\n\n  return fillColor(data);\n};\n\nconst updateSchedule = (): void => {\n  const data = getData();\n  chrome.storage.local.set({ schedule: JSON.stringify(data) }).then(() => {\n    alert(\"Schedule updated!\");\n  });\n};\n\nconst createUpdateButton = () => {\n  const button = document.createElement(\"button\");\n  button.textContent = \"Update Schedule\";\n  button.addEventListener(\"click\", updateSchedule);\n  const headerCell = document.querySelector<HTMLTableCellElement>(\n    \"#ctl00_ContentPlaceHolder1_ctl00_pnlHeader > table > tbody > tr:nth-child(1) > td\"\n  );\n  headerCell?.appendChild(button);\n};\n\nconst tryAutoStart = () => {\n  const scheduleTabButton = document.querySelector<HTMLInputElement>(\n    \"#ctl00_ContentPlaceHolder1_ctl00_rad_ThuTiet\"\n  );\n\n  if (scheduleTabButton && scheduleTabButton.checked) {\n    createUpdateButton();\n  }\n};\ntryAutoStart();\n","import { Subject } from \"../types\";\nexport const parseDayOfWeek = (day: string): number => {\n  const daysOfWeek: Record<string, number> = {\n    Hai: 2,\n    Ba: 3,\n    Tư: 4,\n    Năm: 5,\n    Sáu: 6,\n    Bảy: 7,\n    Mon: 2,\n    Tue: 3,\n    Wed: 4,\n    Thu: 5,\n    Fri: 6,\n    Sat: 7,\n  };\n  return daysOfWeek[day];\n};\n\nexport const parseWeeks = (weeksText: string): Date[] => {\n  // convert to time in number\n  return weeksText\n    .split(\"--\")\n    .map((week) => new Date(week.replace(/(\\d+[/])(\\d+[/])/, \"$2$1\")));\n};\n\nexport const parseSubject = (tdElements: Element[]): Subject => {\n  const subjectText = tdElements.reduce(\n    (previous, current) => previous + (current as HTMLElement).innerText + \"|\",\n    \"\"\n  );\n  const subjectFields = subjectText.split(\"|\");\n\n  return {\n    subjectCode: subjectFields[0],\n    subjectName: subjectFields[1],\n    subjectGroup: subjectFields[2],\n    numberOfCredits: subjectFields[3],\n    classCode: subjectFields[4],\n    creditsForTuitionFee: subjectFields[5],\n    notAllowedToRegister: subjectFields[6],\n    practiceSession: subjectFields[7],\n    dayOfWeek: parseDayOfWeek(subjectFields[8]),\n    startingPeriod: parseInt(subjectFields[9]),\n    numberOfPeriods: parseInt(subjectFields[10]),\n    room: subjectFields[11],\n    lecturer: subjectFields[12],\n    weeks: parseWeeks(tdElements[13].innerHTML.split(\"'\")[1]),\n  };\n};\n\nexport const parsePeriodTime = (\n  period: number\n): { start: string; end: string } => {\n  const periodTime: Record<number, { start: string; end: string }> = {\n    1: { start: \"07:00\", end: \"07:50\" },\n    2: { start: \"07:50\", end: \"08:40\" },\n    3: { start: \"09:00\", end: \"09:50\" },\n    4: { start: \"09:50\", end: \"10:40\" },\n    5: { start: \"10:40\", end: \"11:30\" },\n    6: { start: \"13:00\", end: \"13:50\" },\n    7: { start: \"13:50\", end: \"14:40\" },\n    8: { start: \"15:00\", end: \"15:50\" },\n    9: { start: \"15:50\", end: \"16:40\" },\n    10: { start: \"16:40\", end: \"17:30\" },\n    11: { start: \"17:40\", end: \"18:30\" },\n    12: { start: \"18:30\", end: \"19:20\" },\n    13: { start: \"19:20\", end: \"20:10\" },\n  };\n  return periodTime[period];\n};\n"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","minLen","n","Object","prototype","toString","call","slice","constructor","name","from","test","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","getData","data","_step","colorIndex","colorsMap","Map","_iterator","item","undefined","color","key","subjectCode","existingColor","get","set","sort","a","b","fillColor","document","querySelectorAll","map","trElement","tdElements","weeksText","day","subjectFields","reduce","previous","current","innerText","split","subjectName","subjectGroup","numberOfCredits","classCode","creditsForTuitionFee","notAllowedToRegister","practiceSession","dayOfWeek","Hai","Ba","Tư","Năm","Sáu","Bảy","Mon","Tue","Wed","Thu","Fri","Sat","startingPeriod","parseInt","numberOfPeriods","room","lecturer","weeks","innerHTML","week","Date","replace","parseSubject","updateSchedule","chrome","storage","local","schedule","JSON","stringify","then","alert","scheduleTabButton","querySelector","checked","button","createElement","textContent","addEventListener","headerCell","appendChild","createUpdateButton","tryAutoStart"],"sourceRoot":""}